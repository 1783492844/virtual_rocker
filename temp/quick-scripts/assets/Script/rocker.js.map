{"version":3,"sources":["rocker.js"],"names":["showTypeEnum","FIXED","FOLLOW","moveTypeEnum","CHANGED","crossTypeEnum","FORBID","PERMIT","cc","Class","extends","Component","properties","limitAreaNode","default","type","Node","playerNode","moveSpeedMax","Float","moveDir","v2","visible","MAX_R","rocker_bg","stick","moveFlag","moveSpeed","showType","Enum","moveType","crossType","onLoad","node","getChildByName","width","initTouchEvent","changeShowMode","event","getComponent","Widget","enabled","error","changeMoveMode","changeCrossMode","on","EventType","TOUCH_START","touchStartEvent","TOUCH_MOVE","touchMoveEvent","TOUCH_CANCEL","touchEndEvent","TOUCH_END","startTouchPos","convertToNodeSpaceAR","getLocation","distance","sub","getPosition","mag","pos","setPosition","opacity","x","y","normalize","update","dt","playerMove","radians","Math","atan2","rotation","misc","radiansToDegrees","newPos","position","add","mul","parentNode","getParent","height"],"mappings":"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","file":"rocker.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\r\n * 设计思路\r\n * 1.轮盘呼出限制区域（节点），没有限制则为全屏区域，注意节点为空时的判断\r\n * 2.轮盘默认为透明，触摸相应区域（呼出轮盘时）轮盘透明度提高（跟随模式则还需移动到相应位置）\r\n * 3.触摸移动时，stick跟随移动\r\n * 4.模式设计\r\n *      轮盘呼出（显示）   1.固定 2.跟随触摸点\r\n *      移动速度   1.固定 2.随stick距离轮盘中心的距离而改变（变速模式）\r\n *      越过边界   1.阻止   2.允许（从另一侧出现）\r\n * 5.任务转向速度（暂时不考虑）\r\n * \r\n * 注意事项\r\n * 1.rocker节点的size需要设置，不然点击轮盘会无响应\r\n * 2.如果使用限制区域，则需要让rocker节点成为限制区域节点的子节点，此操作涉及轮盘呼出的位置问题\r\n * 3.如果不使用限制区域，则不能使用轮盘呼出的跟随模式，否则会出错\r\n * \r\n */\r\nvar showTypeEnum = {\r\n    FIXED: 0,\r\n    FOLLOW: 1\r\n}\r\nvar moveTypeEnum = {\r\n    FIXED: 0,\r\n    CHANGED: 1\r\n}\r\nvar crossTypeEnum = {\r\n    FORBID: 0,\r\n    PERMIT: 1\r\n}\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        limitAreaNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        playerNode: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        // 每帧移动多少距离\r\n        moveSpeedMax: {\r\n            default: 1,\r\n            type: cc.Float\r\n        },\r\n        moveDir: {\r\n            default: cc.v2(0, 0),\r\n            visible: false\r\n        },\r\n\r\n        MAX_R: {\r\n            default: 0,\r\n            type: cc.Float,\r\n            visible: false\r\n        },\r\n        rocker_bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false\r\n        },\r\n        stick: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false\r\n        },\r\n        moveFlag: {\r\n            default: false,\r\n            visible: false\r\n        },\r\n        moveSpeed: {\r\n            default: 0,\r\n            type: cc.Float,\r\n            visible: false\r\n        },\r\n\r\n\r\n        showType: {\r\n            default: showTypeEnum.FIXED,\r\n            type: cc.Enum(showTypeEnum),\r\n        },\r\n        moveType: {\r\n            default: moveTypeEnum.FIXED,\r\n            type: cc.Enum(moveTypeEnum),\r\n        },\r\n        crossType: {\r\n            default: crossTypeEnum.FORBID,\r\n            type: cc.Enum(crossTypeEnum)\r\n        }\r\n\r\n\r\n\r\n    },\r\n         \r\n    onLoad() {\r\n        this.rocker_bg = this.node.getChildByName('rocker_bg');\r\n        this.stick = this.node.getChildByName('stick');\r\n        this.MAX_R = this.rocker_bg.width / 2;\r\n\r\n        this.initTouchEvent();\r\n    },\r\n\r\n\r\n\r\n    // 切换轮盘显示（呼出）模式\r\n    changeShowMode: function (event, type) {\r\n        switch (type) {\r\n            case 'FIXED': {\r\n                this.showType = showTypeEnum.FIXED;\r\n                this.node.getComponent(cc.Widget).enabled = true;\r\n                break;\r\n            }\r\n            case 'FOLLOW': {\r\n                this.showType = showTypeEnum.FOLLOW;\r\n                this.node.getComponent(cc.Widget).enabled = false;\r\n                break;\r\n            }\r\n            default: {\r\n                cc.error('类型错误');\r\n                break;\r\n            }\r\n        }\r\n        this.initTouchEvent();\r\n    },\r\n\r\n    // 切换角色移动模式\r\n    changeMoveMode: function (event, type) {\r\n        switch (type) {\r\n            case 'FIXED': {\r\n                this.moveType = moveTypeEnum.FIXED;\r\n                break;\r\n            }\r\n            case 'CHANGED': {\r\n                this.moveType = moveTypeEnum.CHANGED;\r\n                break;\r\n            }\r\n            default: {\r\n                cc.error('类型错误');\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    // 切换越界模式\r\n    changeCrossMode: function (event, type) {\r\n        switch (type) {\r\n            case 'FORBID': {\r\n                this.crossType = crossTypeEnum.FORBID;\r\n                break;\r\n            }\r\n            case 'PERMIT': {\r\n                this.crossType = crossTypeEnum.PERMIT;\r\n                break;\r\n            }\r\n            default: {\r\n                cc.error('类型错误');\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    initTouchEvent() {\r\n        var node = this.node;\r\n        if (this.showType == showTypeEnum.FOLLOW) {\r\n            node = this.limitAreaNode;\r\n            if (!node){\r\n                cc.error('使用轮盘跟随模式，没有设置限制区域');\r\n                return;\r\n            }\r\n        }\r\n\r\n        node.on(cc.Node.EventType.TOUCH_START, this.touchStartEvent, this);\r\n        node.on(cc.Node.EventType.TOUCH_MOVE, this.touchMoveEvent, this);\r\n        node.on(cc.Node.EventType.TOUCH_CANCEL, this.touchEndEvent, this);\r\n        node.on(cc.Node.EventType.TOUCH_END, this.touchEndEvent, this);\r\n    },\r\n\r\n    touchStartEvent: function (event) {\r\n        if (this.showType == showTypeEnum.FIXED) {\r\n            let startTouchPos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n\r\n            let distance = startTouchPos.sub(this.node.getPosition()).mag();\r\n            if (distance <= this.MAX_R) {\r\n                let pos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n                this.stick.setPosition(pos);\r\n                this.node.opacity = 255;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // 注意：虚拟摇杆节点必须是限制区域节点的子节点，不然会出现坐标系错误，导致位置不对\r\n        let startTouchPos = this.limitAreaNode.convertToNodeSpaceAR(event.getLocation());\r\n\r\n        this.node.setPosition(startTouchPos);\r\n        this.node.opacity = 255;\r\n    },\r\n\r\n    touchMoveEvent: function (event) {\r\n        this.moveFlag = true;\r\n\r\n        let pos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n\r\n        let distance = pos.mag();\r\n        if (distance > this.MAX_R) {\r\n            // pos.x / distance == x / r\r\n            pos.x = pos.x * this.MAX_R / distance;\r\n            pos.y = pos.y * this.MAX_R / distance;\r\n\r\n            distance = this.MAX_R;\r\n        }\r\n        this.stick.setPosition(pos);\r\n\r\n        this.moveSpeed = this.moveSpeedMax;\r\n        if (this.moveType == moveTypeEnum.CHANGED) {\r\n            this.moveSpeed = this.moveSpeedMax * (distance / this.MAX_R);\r\n        }\r\n\r\n        // 向量归一化（将模长变为1）\r\n        this.moveDir = pos.normalize();\r\n\r\n    },\r\n\r\n    touchEndEvent: function (event) {\r\n        this.stick.setPosition(0, 0);\r\n        this.moveFlag = false;\r\n\r\n        this.node.opacity = 150;\r\n        this.node.getComponent(cc.Widget).enabled = true;\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.moveFlag) {\r\n            this.playerMove();\r\n        }\r\n    },\r\n\r\n    playerMove: function () {\r\n        // 角度\r\n        let radians = Math.atan2(this.moveDir.y, this.moveDir.x);\r\n        this.playerNode.rotation = 90 - cc.misc.radiansToDegrees(radians);\r\n\r\n        // 位置\r\n        let newPos = this.playerNode.position.add(this.moveDir.mul(this.moveSpeed));\r\n        let parentNode = this.playerNode.getParent();\r\n\r\n        if (this.crossType == crossTypeEnum.FORBID) {\r\n            if (newPos.x > parentNode.width / 2) {\r\n                newPos.x = parentNode.width / 2;\r\n            }\r\n            else if (newPos.x < -parentNode.width / 2) {\r\n                newPos.x = -parentNode.width / 2;\r\n            }\r\n\r\n            if (newPos.y > parentNode.height / 2) {\r\n                newPos.y = parentNode.height / 2;\r\n            }\r\n            else if (newPos.y < -parentNode.height / 2) {\r\n                newPos.y = -parentNode.height / 2;\r\n            }\r\n        }\r\n        else {\r\n            if (newPos.x > parentNode.width / 2) {\r\n                newPos.x -= parentNode.width;\r\n            }\r\n            else if (newPos.x < -parentNode.width / 2) {\r\n                newPos.x += parentNode.width;\r\n            }\r\n\r\n            if (newPos.y > parentNode.height / 2) {\r\n                newPos.y -= parentNode.height;\r\n            }\r\n            else if (newPos.y < -parentNode.height / 2) {\r\n                newPos.y += parentNode.height;\r\n            }\r\n        }\r\n\r\n\r\n        this.playerNode.setPosition(newPos);\r\n    }\r\n});\r\n"]}